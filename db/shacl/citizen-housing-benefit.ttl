@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix ckg: <http://ckg.de/default#> .
@prefix fim: <https://test.schema-repository.fitko.dev/fields/baukasten/> .

ckg:metadata ckg:author ckg:benjaminaaron ;
             ckg:created "2024-01-04"^^xsd:date ;
             ckg:title "Housing Benefit" .

ckg:PricePerSquareMeterOk
    a sh:NodeShape ;
    sh:targetClass ckg:Citizen ;
    sh:sparql [
          a sh:SPARQLConstraint ;
          sh:message "Price per square meter exceeds 16" ;
          sh:select """
            PREFIX ckg: <http://ckg.de/default#>
            PREFIX fim: <https://test.schema-repository.fitko.dev/fields/baukasten/>
            SELECT $this WHERE {
                $this ckg:hasFimDataFieldValue ?rentField, ?areaField .
                ?rentField a fim:F00000240 ; ckg:hasValue ?rent .
                ?areaField a fim:F00003175 ; ckg:hasValue ?area .
                FILTER(?rent / ?area > 16) .
            }
        """ ;
      ] .
